def IMAGE_TAG = "32"
pipeline{
     agent{
     label 'imageidentificationfront'
     }
     environment{     
    DOCKERHUB_CREDENTIALS= credentials('dockerhub_id')     
} 
     stages{
         stage('Checkout') {
          steps{ 
          sh 'pwd'
          git branch: 'main', url: 'https://github.com/abhijitchavan408/image-identification-ui.git'
               }
          }
      
          stage('Docker build'){
          steps{
          sh 'pwd'
               sh 'docker image build -t sumithpe/imagefrontidentification:${IMAGE_TAG} .'
               }  
          }
          
          
          stage('Docker push'){
          steps{
               sh 'echo $DOCKERHUB_CREDENTIALS_PSW | docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
                        sh 'docker image push sumithpe/imagefrontidentification:${IMAGE_TAG}' 
          }
          }    
     }
}
